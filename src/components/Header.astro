---
import GitHub from "@/components/icons/GitHub.astro"
import LinkedIn from "@/components/icons/LinkedIn.astro"

const navItems = [
  {
    title: "Inicio",
    label: "inicio",
    url: "/",
  },
  {
    title: "Experiencia",
    label: "experiencia",
    url: "/experiencia",
  },
  {
    title: "Proyectos",
    label: "proyectos",
    url: "/proyectos",
  },
  {
    title: "Contacto",
    label: "contacto",
    url: "/contacto",
  },
]

const socialLinks = [
  {
    icon: GitHub,
    url: "https://github.com/sonidiaz",
    label: "GitHub",
  },
  {
    icon: LinkedIn,
    url: "https://www.linkedin.com/in/sonidiaz/",
    label: "LinkedIn",
  }
]
---

<header
  class="fixed top-0 z-10 flex items-center justify-center w-full mx-auto"
>
  <nav
    class="w-full flex px-3 text-sm font-medium  text-gray-600 dark:text-gray-200 justify-center items-center gap-6"
  >
  <div class="lg:max-w-6xl w-full flex justify-between items-center md:flex-row flex-col">
  <a
    href="/"
    class="flex py-4 md:py-3 items-center gap-2 font-bold text-gray-800 dark:text-white hover:text-yellow-500 transition-colors"
  >
    <span class="text-lg"><span class="text-grey-900 ">Nacho</span>DÃ­az</span>
  </a>
     <div class="nav-items flex items-center gap-4">
     {
       navItems.map((link) => (
         <a
           class="relative block px-2 py-2 hover:text-yellow-500 transition-colors"
           aria-label={link.label}
           href={link.url}
         >
           {link.title}
         </a>
       ))
     }
     
     <div class="flex hidden md:block md:flex items-center gap-2 ml-4 border-l border-gray-300 dark:border-gray-600 pl-4">
       {
         socialLinks.map((social) => (
           <a
             href={social.url}
             target="_blank"
             rel="noopener noreferrer"
             class="p-1 hover:text-yellow-500 transition-colors"
             aria-label={social.label}
           >
             <social.icon class="w-5 h-5" />
           </a>
         ))
       }
     </div>
   </div>
  </div>
  </nav>
</header>

<script>
  function setActiveNavItem() {
    const navItems = document.querySelectorAll("header nav a[aria-label]");
    const currentPath = window.location.pathname;

    navItems.forEach((item) => {
      const itemUrl = item.getAttribute("href") || "";
      
      // Remove active class from all items
      item.classList.remove("text-yellow-500");
      
      // Add active class to current page
      if (itemUrl === currentPath || 
          (currentPath === "/" && itemUrl === "/") ||
          (currentPath.startsWith(itemUrl) && itemUrl !== "/")) {
        item.classList.add("text-yellow-500");
      }
    });
  }

  // Set active nav item on page load
  document.addEventListener("astro:page-load", setActiveNavItem);
  
  // Also run immediately for direct page access
  setActiveNavItem();
</script>

<style>
  nav {
    animation: nav-shadown 1s linear both;
    animation-timeline: scroll();
    animation-range: 0 100px;
  }

  nav {
    @apply dark:bg-gray-800/90 bg-white/50;
  }

  @keyframes nav-shadown {
    0% {
      @apply dark:bg-gray-800/0 bg-white/0;
    }
    to {
      @apply shadow-lg ring-1 backdrop-blur ring-white/10;
    }
  }
</style>
